<!DOCTYPE html>
<html>
  <head>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      :root {
        --main-color: #f79831;
        --accent-color: #029cde;
        --border-color: #fcb63d;
      }
      body {
        font-family: sans-serif;
        margin: 0;
        padding: 0;
      }

      .table-container {
        display: inline-block;
        width: 48%;
        vertical-align: top;
        margin: 5px;
        padding-top: 20px;
      }

      .watermark {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        opacity: 0.15;
        z-index: 10;
        width: 100%;
        height: 100%;
        background-image: url("https://vcard.vaccinehomebd.com/assets/img/pdf/logo.png");
        background-size: 50%;
        background-repeat: no-repeat;
        background-position: center;
      }

      .page {
        position: relative;
        width: 100%;
        height: 100%;
      }

      .page2 {
        margin: 10px;
      }

      table {
        border-collapse: collapse;
        width: 25%;
        border: 1px solid black;
        margin: 0;
      }

      th,
      td {
        border: 2px solid rgb(224, 216, 216);
        padding: 5px;
        text-align: left;
        font-size: 11px;
      }

      th {
        background-color: #029cde;
        color: white;
      }

      h2,
      h3 {
        text-align: center;
        margin: 10px 0;
      }

      .last-updated {
        text-align: right;
        font-size: 14px;
        margin-right: 20px;
      }
    </style>
  </head>
  <body>
    <div class="page">
      <div class="watermark"></div>
      <table style="margin-top: 30px; border: 0px solid #000">
        <tr>
          <td style="text-align: center; border: 0px solid #000">
            <img
              src="https://vcard.vaccinehomebd.com/assets/img/vaccine_home.png"
              alt="Logo 1"
              style="height: 60px"
            />
          </td>
          <td style="text-align: center; border: 0px solid #000">
            <img
              src="https://vcard.vaccinehomebd.com/assets/img/cerificate.png"
              alt="Logo 1"
              style="height: 60px"
            />
          </td>
          <td style="text-align: center; border: 0px solid #000">
            <img
              src="https://vcard.vaccinehomebd.com/assets/img/qr_code.png"
              alt="Logo 1"
              style="height: 100px"
            />
          </td>
        </tr>
      </table>
      <div class="text-center custom-margin-bottom">
        <h1 style="text-align: center; margin: 30px; border: 0px solid #000">
          Immunization Record
        </h1>
      </div>
      <div style="position: relative; width: 100%; padding-bottom: 40px">
        <div
          style="
            position: absolute;
            top: 0;
            right: 0;
            font-size: 0.9rem;
            color: #000;
          "
        >
          <b>Last Updated:</b> {{ $lastUpdated->format('d/m/Y') }}
        </div>
      </div>

      <table
        style="
          width: 100%;
          padding: 8px;
          border-collapse: collapse;
          border: 0px solid #ddd;
        "
      >
        <tr>
          <td style="font-size: 14px; padding: 8px; border: 1px solid #000">
            <b>Name:</b> {{ $patient->name }}
          </td>
          <td style="font-size: 14px; padding: 8px; border: 1px solid #000">
            <b>Date of Birth:</b> {{ date('d/m/Y', strtotime($patient->birth))
            }}
          </td>
        </tr>
        <tr>
          <td style="font-size: 14px; padding: 8px; border: 1px solid #000">
            <b>Father's Name:</b> {{ $patient->father }}
          </td>

          <td style="font-size: 14px; padding: 8px; border: 1px solid #000">
            <b>Gender:</b> {{ $patient->gender }}
          </td>
        </tr>
        <tr>
          <td style="font-size: 14px; padding: 8px; border: 1px solid #000">
            <b>Mother's Name:</b> {{ $patient->mother }}
          </td>
          <td style="font-size: 14px; padding: 8px; border: 1px solid #000">
            <b>UHID:</b> {{ $patient->id }}
          </td>
        </tr>
        <tr>
          <td style="font-size: 14px; padding: 8px; border: 1px solid #000">
            <b>Mobile Number:</b> {{ $patient->phone_number }}
          </td>
          <td style="font-size: 14px; padding: 8px; border: 1px solid #000">
            <b>Nationality:</b> {{ $patient->nationality }}
          </td>
        </tr>
        <tr>
          <td style="font-size: 14px; padding: 8px; border: 1px solid #000">
            <b>Passport Number:</b> {{ $patient->passport_number }}
          </td>
          <td style="font-size: 14px; padding: 8px; border: 1px solid #000">
            <b>Birth Certificate Number:</b> {{
            $patient->birth_certificate_number }}
          </td>
        </tr>
        <tr>
          <td
            colspan="2"
            style="font-size: 14px; padding: 8px; border: 1px solid #000"
          >
            <b>Address:</b> {{ $patient->address }}
          </td>
        </tr>
      </table>

      <div class="table-container">
        <!-- First Table (Patient Data) -->
        <table>
          <thead>
            <tr>
              <th
                style="
                  font-size: 11px;
                  text-align: left;
                  padding: 8px;
                  border: 2px solid rgb(224, 216, 216);
                "
              >
                Vaccine Name
              </th>
              <th
                style="
                  font-size: 11px;
                  text-align: left;
                  padding: 8px;
                  border: 2px solid rgb(224, 216, 216);
                "
              >
                Dose
              </th>
              <th
                style="
                  font-size: 11px;
                  text-align: left;
                  padding: 8px;
                  border: 2px solid rgb(224, 216, 216);
                "
              >
                Due Date
              </th>
              <th
                style="
                  font-size: 11px;
                  text-align: left;
                  padding: 8px;
                  border: 2px solid rgb(224, 216, 216);
                "
              >
                Vaccination Done On
              </th>
              <th
                style="
                  font-size: 11px;
                  text-align: left;
                  padding: px;
                  border: 2px solid rgb(224, 216, 216);
                "
              >
                Remarks
              </th>
            </tr>
          </thead>
          <tbody>
            @foreach ($vaccinations as $index => $vaccination) @if ($index < 11)
            <tr>
              <td>{{ $vaccination->vaccine_name }}</td>
              <td>{{ $vaccination->dose }}</td>
              @if(isset($vaccination) && $vaccination->vaccination_date)
              <td style="background-color: #8cff9e; color: black">
                @php $patientDob = $patient->birth; $approxAge =
                $vaccination->approx_age; $ageParts = explode(' ', $approxAge);
                $ageValue = 0; $ageUnit = ''; if (count($ageParts) === 2) {
                $ageValue = (int)$ageParts[0]; $ageUnit =
                strtolower($ageParts[1]); } $dueDate = null; if
                (!empty($patientDob)) { if ($ageUnit === 'days') { $dueDate =
                date('d/m/Y', strtotime($patientDob . ' + ' . $ageValue . '
                days')); } elseif ($ageUnit === 'months') { $dueDate =
                date('d/m/Y', strtotime($patientDob . ' + ' . $ageValue . '
                months')); } } @endphp {{ $dueDate ?? 'N/A' }}
              </td>
              @else
              <td style="background-color: #ffb3aa; color: black">
                @php $patientDob = $patient->birth; $approxAge =
                $vaccination->approx_age; $ageParts = explode(' ', $approxAge);
                $ageValue = 0; $ageUnit = ''; if (count($ageParts) === 2) {
                $ageValue = (int)$ageParts[0]; $ageUnit =
                strtolower($ageParts[1]); } $dueDate = null; if
                (!empty($patientDob)) { if ($ageUnit === 'days') { $dueDate =
                date('d/m/Y', strtotime($patientDob . ' + ' . $ageValue . '
                days')); } elseif ($ageUnit === 'months') { $dueDate =
                date('d/m/Y', strtotime($patientDob . ' + ' . $ageValue . '
                months')); } } @endphp {{ $dueDate ?? 'N/A' }}
              </td>
              @endif
              <td>
                {{ $vaccination->vaccination_date ? date('d/m/Y',
                strtotime($vaccination->vaccination_date)) : '' }}
              </td>
              <td>{{ $vaccination->remarks }}</td>
            </tr>
            @endif @endforeach
          </tbody>
        </table>
      </div>

      <!-- Second Loop for Index >= 10 -->

      <div class="table-container">
        <!-- Second Table (Vaccination Data) -->
        <table>
          <thead
            class="text-white"
            style="background-color: var(--accent-color)"
          >
            <tr>
              <th
                style="
                  font-size: 11px;
                  text-align: left;
                  padding: 6px;
                  border: 2px solid rgb(224, 216, 216);
                "
              >
                Vaccine Name
              </th>
              <th
                style="
                  font-size: 11px;
                  text-align: left;
                  padding: 6px;
                  border: 2px solid rgb(224, 216, 216);
                "
              >
                Dose
              </th>
              <th
                style="
                  font-size: 11px;
                  text-align: left;
                  padding: 6px;
                  border: 2px solid rgb(224, 216, 216);
                "
              >
                Due Date
              </th>
              <th
                style="
                  font-size: 11px;
                  text-align: left;
                  padding: 6px;
                  border: 2px solid rgb(224, 216, 216);
                "
              >
                Vaccination Done On
              </th>
              <th
                style="
                  font-size: 11px;
                  text-align: left;
                  padding: 6px;
                  border: 2px solid rgb(224, 216, 216);
                "
              >
                Remarks
              </th>
            </tr>
          </thead>
          <tbody>
            @foreach ($vaccinations as $index => $vaccination) @if ($index >= 11
            && $index < 21)
            <tr>
              <td>{{ $vaccination->vaccine_name }}</td>
              <td>{{ $vaccination->dose }}</td>
              @if(isset($vaccination) && $vaccination->vaccination_date)
              <td style="background-color: #8cff9e; color: black">
                @php $patientDob = $patient->birth; $approxAge =
                $vaccination->approx_age; $ageParts = explode(' ', $approxAge);
                $ageValue = 0; $ageUnit = ''; if (count($ageParts) === 2) {
                $ageValue = (int)$ageParts[0]; $ageUnit =
                strtolower($ageParts[1]); } $dueDate = null; if
                (!empty($patientDob)) { if ($ageUnit === 'days') { $dueDate =
                date('d/m/Y', strtotime($patientDob . ' + ' . $ageValue . '
                days')); } elseif ($ageUnit === 'months') { $dueDate =
                date('d/m/Y', strtotime($patientDob . ' + ' . $ageValue . '
                months')); } } @endphp {{ $dueDate ?? 'N/A' }}
              </td>
              @else
              <td style="background-color: #ffb3aa; color: black">
                @php $patientDob = $patient->birth; $approxAge =
                $vaccination->approx_age; $ageParts = explode(' ', $approxAge);
                $ageValue = 0; $ageUnit = ''; if (count($ageParts) === 2) {
                $ageValue = (int)$ageParts[0]; $ageUnit =
                strtolower($ageParts[1]); } $dueDate = null; if
                (!empty($patientDob)) { if ($ageUnit === 'days') { $dueDate =
                date('d/m/Y', strtotime($patientDob . ' + ' . $ageValue . '
                days')); } elseif ($ageUnit === 'months') { $dueDate =
                date('d/m/Y', strtotime($patientDob . ' + ' . $ageValue . '
                months')); } } @endphp {{ $dueDate ?? 'N/A' }}
              </td>
              @endif
              <td>
                {{ $vaccination->vaccination_date ? date('d/m/Y',
                strtotime($vaccination->vaccination_date)) : '' }}
              </td>
              <td>{{ $vaccination->remarks }}</td>
            </tr>
          </tbody>
          @endif @endforeach
        </table>
      </div>
    </div>

    <div class="page">
        <div class="watermark"></div>
      <div class="table-container">
        <!-- First Table (Patient Data) -->
        <table>
          <thead>
            <tr>
              <th>Vaccine Name</th>
              <th>Dose</th>
              <th>Due Date</th>
              <th>Vaccination Done On</th>
              <th>Remarks</th>
            </tr>
          </thead>
          <tbody>
            @foreach ($vaccinations as $index => $vaccination) @if ($index >= 21
            && $index < 32)
            <tr>
              <td>{{ $vaccination->vaccine_name }}</td>
              <td>{{ $vaccination->dose }}</td>
              @if(isset($vaccination) && $vaccination->vaccination_date)
              <td style="background-color: #8cff9e; color: black">
                @php $patientDob = $patient->birth; $approxAge =
                $vaccination->approx_age; $ageParts = explode(' ', $approxAge);
                $ageValue = 0; $ageUnit = ''; if (count($ageParts) === 2) {
                $ageValue = (int)$ageParts[0]; $ageUnit =
                strtolower($ageParts[1]); } $dueDate = null; if
                (!empty($patientDob)) { if ($ageUnit === 'days') { $dueDate =
                date('d/m/Y', strtotime($patientDob . ' + ' . $ageValue . '
                days')); } elseif ($ageUnit === 'months') { $dueDate =
                date('d/m/Y', strtotime($patientDob . ' + ' . $ageValue . '
                months')); } } @endphp {{ $dueDate ?? 'N/A' }}
              </td>
              @else
              <td style="background-color: #ffb3aa; color: black">
                @php $patientDob = $patient->birth; $approxAge =
                $vaccination->approx_age; $ageParts = explode(' ', $approxAge);
                $ageValue = 0; $ageUnit = ''; if (count($ageParts) === 2) {
                $ageValue = (int)$ageParts[0]; $ageUnit =
                strtolower($ageParts[1]); } $dueDate = null; if
                (!empty($patientDob)) { if ($ageUnit === 'days') { $dueDate =
                date('d/m/Y', strtotime($patientDob . ' + ' . $ageValue . '
                days')); } elseif ($ageUnit === 'months') { $dueDate =
                date('d/m/Y', strtotime($patientDob . ' + ' . $ageValue . '
                months')); } } @endphp {{ $dueDate ?? 'N/A' }}
              </td>
              @endif
              <td>
                {{ $vaccination->vaccination_date ? date('d/m/Y',
                strtotime($vaccination->vaccination_date)) : '' }}
              </td>
              <td>{{ $vaccination->remarks }}</td>
            </tr>
            @endif @endforeach
          </tbody>
        </table>
      </div>

      <!-- Second Loop for Index >= 10 -->

      <div class="table-container">
        <!-- Second Table (Vaccination Data) -->
        <table>
          <thead
            class="text-white"
            style="background-color: var(--accent-color)"
          >
            <tr>
              <th
                style="
                  font-size: 11px;
                  text-align: left;
                  padding: 7px;
                  border: 2px solid rgb(224, 216, 216);
                "
              >
                Vaccine Name
              </th>
              <th
                style="
                  font-size: 11px;
                  text-align: left;
                  padding: 7px;
                  border: 2px solid rgb(224, 216, 216);
                "
              >
                Dose
              </th>
              <th
                style="
                  font-size: 11px;
                  text-align: left;
                  padding: 7px;
                  border: 2px solid rgb(224, 216, 216);
                "
              >
                Due Date
              </th>
              <th
                style="
                  font-size: 11px;
                  text-align: left;
                  padding: 7px;
                  border: 2px solid rgb(224, 216, 216);
                "
              >
                Vaccination Done On
              </th>
              <th
                style="
                  font-size: 11px;
                  text-align: left;
                  padding: 7px;
                  border: 2px solid rgb(224, 216, 216);
                "
              >
                Remarks
              </th>
            </tr>
          </thead>
          <tbody>
            @foreach ($vaccinations as $index => $vaccination) @if ($index >= 32
            && $index < 50)
            <tr>
              <td>{{ $vaccination->vaccine_name }}</td>
              <td>{{ $vaccination->dose }}</td>
              @if(isset($vaccination) && $vaccination->vaccination_date)
              <td style="background-color: #8cff9e; color: black">
                @php $patientDob = $patient->birth; $approxAge =
                $vaccination->approx_age; $ageParts = explode(' ', $approxAge);
                $ageValue = 0; $ageUnit = ''; if (count($ageParts) === 2) {
                $ageValue = (int)$ageParts[0]; $ageUnit =
                strtolower($ageParts[1]); } $dueDate = null; if
                (!empty($patientDob)) { if ($ageUnit === 'days') { $dueDate =
                date('d/m/Y', strtotime($patientDob . ' + ' . $ageValue . '
                days')); } elseif ($ageUnit === 'months') { $dueDate =
                date('d/m/Y', strtotime($patientDob . ' + ' . $ageValue . '
                months')); } } @endphp {{ $dueDate ?? 'N/A' }}
              </td>
              @else
              <td style="background-color: #ffb3aa; color: black">
                @php $patientDob = $patient->birth; $approxAge =
                $vaccination->approx_age; $ageParts = explode(' ', $approxAge);
                $ageValue = 0; $ageUnit = ''; if (count($ageParts) === 2) {
                $ageValue = (int)$ageParts[0]; $ageUnit =
                strtolower($ageParts[1]); } $dueDate = null; if
                (!empty($patientDob)) { if ($ageUnit === 'days') { $dueDate =
                date('d/m/Y', strtotime($patientDob . ' + ' . $ageValue . '
                days')); } elseif ($ageUnit === 'months') { $dueDate =
                date('d/m/Y', strtotime($patientDob . ' + ' . $ageValue . '
                months')); } } @endphp {{ $dueDate ?? 'N/A' }}
              </td>
              @endif
              <td>
                {{ $vaccination->vaccination_date ? date('d/m/Y',
                strtotime($vaccination->vaccination_date)) : '' }}
              </td>
              <td>{{ $vaccination->remarks }}</td>
            </tr>
          </tbody>
          @endif @endforeach
        </table>
      </div>
      <div style="position: absolute; bottom: 0; left: 0; width: 100%">
        <div
          style="
            position: relative;
            width: 100%;
            padding-bottom: 20px;
            margin-top: 40px;
          "
        >
          <div
            style="
              position: absolute;
              top: 0;
              right: 0;
              display: flex;
              align-items: center;
              flex-direction: column;
            "
          >
            <img
              src="https://vcard.vaccinehomebd.com/assets/img/shil.png"
              alt="Image 1"
              style="height: 110px; margin-left: 10px"
            />
            <img
              src="https://vcard.vaccinehomebd.com/assets/img/signiture.png"
              alt="Image 2"
              style="height: 110px"
            />
            <p style="text-align: center; margin-left: 120px">
              Authorised Signature
            </p>
          </div>
        </div>

        <footer
          style="
            padding: 10x;
            text-align: center;
            margin-top: 130px;
            border-top: 3px solid #fcb73c;
          "
        >
          <div class="container" style="padding: 10px">
            <p style="font-size: 14px; margin: 5px 0">
              106/A, K.B. Fazlul Kader Road, Panchlaish, Chattogram.
            </p>
            <p style="font-size: 14px; margin: 5px 0">
              (Opposite to Chittagong Medical College Hospital's Main Gate),
              West Side of Epic Health Care, Care Investigation (2nd Floor)
            </p>
            <p style="font-size: 14px; margin: 5px 0">
              <b
                >Tel: 0241-355253, Mobile: 01915633535, 01734941989,
                01819102021</b
              >
            </p>
            <p style="font-size: 14px; margin: 5px 0">
              Visit: www.Vaccinehomebd.Com
            </p>
          </div>
        </footer>
      </div>
    </div>
  </body>
</html>
